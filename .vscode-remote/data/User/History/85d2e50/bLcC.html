<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="{{ url_for('static', filename='routine.css') }}">
  <title>Create Workout</title>
</head>
<body>

  <header>
    <h1 style="color: white;">Workout App
      <img src="https://www.vectorkhazana.com/assets/images/products/Dumbbell_Svg.png"> 
     </img>
    </h1>
      <nav class="navbar">
          <div class="navbar-links">
            <a href="/temp">Home</a>
            <a href="/routine">Workout Routine</a>
            <a href="/view">Routine View</a>
            <a href="/">Logout</a>
          </div>
      </nav>
    </header>

<h1>Weekly Workout Routine</h1>

<div class="bar">
  <!-- Monday -->
  <div class="workout-card" id="monday">
    <h2>Monday</h2>
    <label for="monday-muscle-groups">Muscle Groups:</label>
    <select id="monday-muscle-groups">
      <option value="abdominals">Abdominals</option>
      <option value="abductors">Abductors</option>
      <option value="adductors">Adductors</option>
      <option value="biceps">Biceps</option>
      <option value="calves">Calves</option>
      <option value="chest">Chest</option>
      <option value="forearms">Forearms</option>
      <option value="glutes">Glutes</option>
      <option value="hamstrings">Hamstrings</option>
      <option value="lats">Lats</option>
      <option value="lower_back">Lower Back</option>
      <option value="middle_back">Middle Back</option>
      <option value="neck">Neck</option>
      <option value="quadriceps">Quadriceps</option>
      <option value="traps">Traps</option>
      <option value="triceps">Triceps</option>
    </select>
    <button onclick="fetchAndDisplay('monday')">Fetch Workouts</button>
    <button onclick="toggleExerciseList('monday')">Close Exercises</button>
    <div class="exercise-list" id="monday-exercises"></div> <!-- Display fetched exercises here -->
    <ul id="monday-routine-list"></ul> <!-- List to add exercises -->
  </div>

<!-- Tuesday -->
<div class="workout-card" id="tuesday">
  <h2>Tuesday</h2>
  <label for="tuesday-muscle-groups">Muscle Groups:</label>
  <select id="tuesday-muscle-groups">
    <option value="abdominals">Abdominals</option>
    <option value="abductors">Abductors</option>
    <option value="adductors">Adductors</option>
    <option value="biceps">Biceps</option>
    <option value="calves">Calves</option>
    <option value="chest">Chest</option>
    <option value="forearms">Forearms</option>
    <option value="glutes">Glutes</option>
    <option value="hamstrings">Hamstrings</option>
    <option value="lats">Lats</option>
    <option value="lower_back">Lower Back</option>
    <option value="middle_back">Middle Back</option>
    <option value="neck">Neck</option>
    <option value="quadriceps">Quadriceps</option>
    <option value="traps">Traps</option>
    <option value="triceps">Triceps</option>
  </select>
  <button onclick="fetchAndDisplay('tuesday')">Fetch Workouts</button>
  <button onclick="toggleExerciseList('tuesday')">Close Exercises</button>
  <div class="exercise-list" id="tuesday-exercises"></div> <!-- Display fetched exercises here -->
  <ul id="tuesday-routine-list"></ul> <!-- List to add exercises -->
</div>

<!-- Wednesday -->
<div class="workout-card" id="wednesday">
  <h2>Wednesday</h2>
  <label for="wednesday-muscle-groups">Muscle Groups:</label>
  <select id="wednesday-muscle-groups">
    <option value="abdominals">Abdominals</option>
    <option value="abductors">Abductors</option>
    <option value="adductors">Adductors</option>
    <option value="biceps">Biceps</option>
    <option value="calves">Calves</option>
    <option value="chest">Chest</option>
    <option value="forearms">Forearms</option>
    <option value="glutes">Glutes</option>
    <option value="hamstrings">Hamstrings</option>
    <option value="lats">Lats</option>
    <option value="lower_back">Lower Back</option>
    <option value="middle_back">Middle Back</option>
    <option value="neck">Neck</option>
    <option value="quadriceps">Quadriceps</option>
    <option value="traps">Traps</option>
    <option value="triceps">Triceps</option>
  </select>
  <button onclick="fetchAndDisplay('wednesday')">Fetch Workouts</button>
  <button onclick="toggleExerciseList('wednesday')">Close Exercises</button>
    <div class="exercise-list" id="wednesday-exercises"></div> <!-- Display fetched exercises here -->
    <ul id="wednesday-routine-list"></ul> <!-- List to add exercises -->
  </div>

<!-- Thursday -->
<div class="workout-card" id="thursday">
  <h2>Thursday</h2>
  <label for="thursday-muscle-groups">Muscle Groups:</label>
  <select id="thursday-muscle-groups">
    <option value="abdominals">Abdominals</option>
    <option value="abductors">Abductors</option>
    <option value="adductors">Adductors</option>
    <option value="biceps">Biceps</option>
    <option value="calves">Calves</option>
    <option value="chest">Chest</option>
    <option value="forearms">Forearms</option>
    <option value="glutes">Glutes</option>
    <option value="hamstrings">Hamstrings</option>
    <option value="lats">Lats</option>
    <option value="lower_back">Lower Back</option>
    <option value="middle_back">Middle Back</option>
    <option value="neck">Neck</option>
    <option value="quadriceps">Quadriceps</option>
    <option value="traps">Traps</option>
    <option value="triceps">Triceps</option>
  </select>
  <button onclick="fetchAndDisplay('thursday')">Fetch Workouts</button>
  <button onclick="toggleExerciseList('thursday')">Close Exercises</button>
    <div class="exercise-list" id="thursday-exercises"></div> <!-- Display fetched exercises here -->
    <ul id="thursday-routine-list"></ul> <!-- List to add exercises -->
  </div>

<!-- Friday -->
<div class="workout-card" id="friday">
  <h2>Friday</h2>
  <label for="friday-muscle-groups">Muscle Groups:</label>
  <select id="friday-muscle-groups">
    <option value="abdominals">Abdominals</option>
    <option value="abductors">Abductors</option>
    <option value="adductors">Adductors</option>
    <option value="biceps">Biceps</option>
    <option value="calves">Calves</option>
    <option value="chest">Chest</option>
    <option value="forearms">Forearms</option>
    <option value="glutes">Glutes</option>
    <option value="hamstrings">Hamstrings</option>
    <option value="lats">Lats</option>
    <option value="lower_back">Lower Back</option>
    <option value="middle_back">Middle Back</option>
    <option value="neck">Neck</option>
    <option value="quadriceps">Quadriceps</option>
    <option value="traps">Traps</option>
    <option value="triceps">Triceps</option>
  </select>
  <button onclick="fetchAndDisplay('friday')">Fetch Workouts</button>
  <button onclick="toggleExerciseList('friday')">Close Exercises</button>
  <div class="exercise-list" id="friday-exercises"></div> <!-- Display fetched exercises here -->
  <ul id="friday-routine-list"></ul> <!-- List to add exercises -->
</div>

<!-- Saturday -->
<div class="workout-card" id="saturday">
  <h2>Saturday</h2>
  <label for="saturday-muscle-groups">Muscle Groups:</label>
  <select id="saturday-muscle-groups">
    <option value="abdominals">Abdominals</option>
    <option value="abductors">Abductors</option>
    <option value="adductors">Adductors</option>
    <option value="biceps">Biceps</option>
    <option value="calves">Calves</option>
    <option value="chest">Chest</option>
    <option value="forearms">Forearms</option>
    <option value="glutes">Glutes</option>
    <option value="hamstrings">Hamstrings</option>
    <option value="lats">Lats</option>
    <option value="lower_back">Lower Back</option>
    <option value="middle_back">Middle Back</option>
    <option value="neck">Neck</option>
    <option value="quadriceps">Quadriceps</option>
    <option value="traps">Traps</option>
    <option value="triceps">Triceps</option>
  </select>
  <button onclick="fetchAndDisplay('saturday')">Fetch Workouts</button>
  <button onclick="toggleExerciseList('saturday')">Close Exercises</button>
    <div class="exercise-list" id="saturday-exercises"></div> <!-- Display fetched exercises here -->
    <ul id="saturday-routine-list"></ul> <!-- List to add exercises -->
  </div>

<!-- Sunday -->
<div class="workout-card" id="sunday">
  <h2>Sunday</h2>
  <label for="sunday-muscle-groups">Muscle Groups:</label>
  <select id="sunday-muscle-groups">
    <option value="abdominals">Abdominals</option>
    <option value="abductors">Abductors</option>
    <option value="adductors">Adductors</option>
    <option value="biceps">Biceps</option>
    <option value="calves">Calves</option>
    <option value="chest">Chest</option>
    <option value="forearms">Forearms</option>
    <option value="glutes">Glutes</option>
    <option value="hamstrings">Hamstrings</option>
    <option value="lats">Lats</option>
    <option value="lower_back">Lower Back</option>
    <option value="middle_back">Middle Back</option>
    <option value="neck">Neck</option>
    <option value="quadriceps">Quadriceps</option>
    <option value="traps">Traps</option>
    <option value="triceps">Triceps</option>
  </select>
  <button onclick="fetchAndDisplay('sunday')">Fetch Workouts</button>
  <button onclick="toggleExerciseList('sunday')">Close Exercises</button>
    <div class="exercise-list" id="sunday-exercises"></div> <!-- Display fetched exercises here -->
    <ul id="sunday-routine-list"></ul> <!-- List to add exercises -->
  </div>
</div>


<div class="save-button-container">
  <button onclick="saveRoutine()" class="save-button">Save Routine</button>
</div>

<script>
  function toggleExerciseList(day) {
    var exerciseList = document.getElementById(day + "-exercises");
    if (exerciseList.style.display === "none") {
      exerciseList.style.display = "block";
    } else {
      exerciseList.style.display = "none";
    }
  }
  // Function to fetch workouts from the API for a given muscle group
  function fetchWorkoutsByMuscle(muscle) {
    var api_url = 'https://api.api-ninjas.com/v1/exercises?muscle=' + muscle;
    return fetch(api_url, {
      headers: {
        'X-Api-Key': 'MNTs3LU671IWeM9bxMaF0A==thhK8SBpIUrdU0y4'
      }
    }).then(response => response.json());
  }

 // Function to fetch and display workouts for a specific day
function fetchAndDisplay(day) {
  var muscle = document.getElementById(day + "-muscle-groups").value;
  var container = document.getElementById(day + "-exercises");
  container.innerHTML = ""; // Clear previous exercises
  fetchWorkoutsByMuscle(muscle)
    .then(exercises => {
      exercises.forEach(exercise => {
        var exerciseElement = document.createElement("div");
        var exerciseName = document.createElement("span");
        exerciseName.textContent = exercise.name;
        var addButton = document.createElement("button");
        addButton.textContent = "Add";
        addButton.addEventListener("click", function() {
          addExerciseToRoutine(exercise.name, day);
        });
        exerciseElement.appendChild(exerciseName);
        exerciseElement.appendChild(addButton);
        container.appendChild(exerciseElement);
      });
    })
    .catch(error => {
      console.error('Error fetching exercises:', error);
    });
}

// Function to add exercise to routine list
function addExerciseToRoutine(exerciseName, day) {
  var routineList = document.getElementById(day + "-routine-list");
  var exerciseListItem = document.createElement("li");
  exerciseListItem.textContent = exerciseName;
  routineList.appendChild(exerciseListItem);
}

  // Function to save the routine to localStorage and redirect to routineview.html
  function saveRoutine() {
    var allDays = ["monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"];
    var allExercises = {};
    allDays.forEach(day => {
      var routineList = document.getElementById(day + "-routine-list");
      var exercises = [];
      routineList.childNodes.forEach(node => {
        if (node.nodeName === "LI") {
          exercises.push(node.textContent);
        }
      });
      allExercises[day] = exercises;
    });
    localStorage.setItem("routine", JSON.stringify(allExercises));
    // window.location.href = "routineview.html";
  }
</script>

</body>
</html>